<html>
<body style="margin:0;">    
    <canvas style="display:block; margin: 0 auto; border-radius: 50%;" id="canvas"></canvas>    
    <script>
        function cs(e, t, r) { var a = e.createShader(t); if (e.shaderSource(a, r), e.compileShader(a), e.getShaderParameter(a, e.COMPILE_STATUS)) return a; e.deleteShader(a) } function cp(e, t, r) { var a = e.createProgram(); if (e.attachShader(a, t), e.attachShader(a, r), e.linkProgram(a), e.getProgramParameter(a, e.LINK_STATUS)) return a; e.deleteProgram(a) } function main() { var e = document.querySelector("#canvas"), t = document.createElement("canvas"); const r = document.body; var a = .9 * (r.clientWidth < r.clientHeight ? r.clientWidth : r.clientHeight); e.getContext("2d"); e.style.width = a, e.style.height = a, e.width = a, e.height = a, t.width = 2 * a, t.height = 2 * a; t.getContext("webgl") 

const fs = `
precision highp float;

uniform vec2 iResolution;
uniform float iTime;
uniform vec4 iDate;

#define t iTime
#define r iResolution.xy

int mod(int x, int y)
{
    float f = float(x)/float(y);
    return x - y * int(floor(f));
}

float line(vec2 lP, vec2 lA, vec2 lB, float lr)
{
    vec2 g = lB - lA;
    vec2 h = lP - lA;
    float d = length(h - g * clamp(dot(g, h) / dot(g,g), 0.0, 1.0));
	return smoothstep(lr, 0.5*lr, d);
}

{{#hands#}}

{{#background#}}

    void main() {
        mainImage(gl_FragColor, gl_FragCoord.xy);
    }
`;

        var vertexShader = cs(gl, gl.VERTEX_SHADER, vs);
        var fragmentShader = cs(gl, gl.FRAGMENT_SHADER, fs);
        const program = cp(gl, vertexShader, fragmentShader);
        const positionAttributeLocation = gl.getAttribLocation(program, "a_position");
        const resolutionLocation = gl.getUniformLocation(program, "iResolution");        
        const timeLocation = gl.getUniformLocation(program, "iTime");
        const dateLocation = gl.getUniformLocation(program, "iDate");
        const positionBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
            -1, -1,
            1, -1,
            -1, 1,
            -1, 1,
            1, -1,
            1, 1,
        ]), gl.STATIC_DRAW);
        let requestId;
        function rf() {
            if (!requestId) {
                requestId = requestAnimationFrame(render);
            }
        }
        function cf() {
            if (requestId) {
                cancelAnimationFrame(requestId);
                requestId = undefined;
            }
        }
        setInterval(rf, 10);
        let then = 0;
        let time = 0;

        function rc() {
            //replace clock parts below
            ctx.drawImage(webGL, 0, 0, canvas.width, canvas.height);

            {{#numbers#}}           
        }

        function render(now) {
            requestId = undefined;
            now *= 0.001;
            const elapsedTime = Math.min(now - then, 0.1);
            time += elapsedTime;
            then = now;                            
            gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);
            gl.useProgram(program);
            gl.enableVertexAttribArray(positionAttributeLocation);
            gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);
            gl.vertexAttribPointer(
                positionAttributeLocation,
                2,
                gl.FLOAT,
                false,
                0,
                0,
            );
            gl.uniform2f(resolutionLocation, gl.canvas.width, gl.canvas.height);
            gl.uniform1f(timeLocation, time);
            var d = new Date();
            gl.uniform4f(dateLocation, d.getFullYear(), d.getMonth(), d.getDate(), d.getSeconds() + d.getMinutes() * 60 + d.getHours() * 60 * 60 + (d.getMilliseconds() / 1000));
            gl.drawArrays(
                gl.TRIANGLES,
                0,
                6,
            );
            rf();

            rc();            
        }
        rf();
        requestAnimationFrame(cf);
    }
    main();
    </script>
</body>
</html>